# =============================================================================
# Emu-Backup Configuration
# =============================================================================
# Define backup sources, modes, types, and exclusions.
#
# FORMAT:
#   [source-name]
#   path = /path/to/source
#   mode = archive | mirror
#   type = config | save
#   retention = N              (optional, for archive mode)
#   excludes = pattern1 pattern2 pattern3
#
# MODES:
#   archive - Creates timestamped tar.xz archives, auto-prunes old versions
#   mirror  - Direct rsync copy with .previous directory for recovery
#
# TYPES:
#   config - Stored in $configs_dir (default if not specified)
#   save   - Stored in $saves_dir
#
# EXCLUDES:
#   Space-separated patterns. Supports:
#   - Exact folder names: "cache" "logs"
#   - Wildcards: "*.log" "*.tmp"
#   - Paths: "system/Mupen64plus/textures"
#
# HARDCODED EXCLUSIONS (always applied, cannot be overridden):
#   shaders, Shaders, shader_cache, ShaderCache, StaticShaders, GraphicPacks
#   These are large, regenerated automatically, and not needed for backups.
#
# =============================================================================

# --- Global Settings ---
[global]
# Backup destinations - configure one or both:
#   - Local only:  Set configs_dir/saves_dir, leave nas_* empty
#   - NAS only:    Set nas_configs_dir/nas_saves_dir, leave local empty
#   - Both:        Set all four - backs up to local first, then syncs to NAS

# Local backup (fast, always available)
configs_dir = ~/Backups/Configs
saves_dir = ~/Backups/Saves

# NAS backup (synced after local when both are set)
nas_configs_dir = ~/mnt/Backups/Configs
nas_saves_dir = ~/mnt/Backups/Saves

# Default number of archive versions to keep (can be overridden per-source)
retention = 7

# Global excludes applied to ALL sources (in addition to hardcoded shader excludes)
global_excludes = *.log *.tmp

# --- Backup Sources ---

# Consider mirror mode for large directories for efficiency and browsability
[retroarch]
path = ~/.config/retroarch
mode = archive
type = config
excludes = thumbnails database cheats overlays shaders

[esde-config]
path = ~/ES-DE
mode = archive
type = config
excludes = themes downloaded_media gamelists/.*.tmp

[esde-media]
path = ~/ES-DE/downloaded_media
mode = mirror
type = config

[esde-themes]
path = ~/ES-DE/themes
mode = mirror
type = config

# --- Game Saves ---

[gamesaves]
path = ~/.config/gamesaves
mode = mirror
type = save
excludes =

# --- Small Emulator Configs (archive mode for dated snapshots) ---

[dolphin]
path = ~/.config/dolphin-emu
mode = archive
type = config
excludes = Cache Shaders ShaderCache StaticShaders

[pcsx2]
path = ~/.config/PCSX2
mode = archive
type = config
excludes = cache shaders shader_cache textures

[rpcs3]
path = ~/.config/rpcs3
mode = archive
type = config
excludes = cache shaders shader_cache

[ppsspp]
path = ~/.config/ppsspp
mode = archive
type = config
excludes = shaders PSP/SYSTEM/CACHE

[duckstation]
path = ~/.config/duckstation
mode = archive
type = config
excludes = cache shaders shader_cache

[cemu]
path = ~/.config/Cemu
mode = archive
type = config
excludes = shaderCache graphicPacks/downloadedGraphicPacks

# --- Selective Backup (includes mode) ---
# Back up only specific file types from ROMs folder (follows symlinks)

[esde-scripts]
path = ~/ROMs
#mode = mirror
mode = archive
type = config
includes = *.sh *.desktop systeminfo.txt

# --- Selective Backup (includes + excludes) ---
# Use 'includes' to back up ONLY specific file types (follows symlinks)
# Use 'excludes' to skip specific folders even within included files

# [esde-scripts]
# path = ~/ROMs
# mode = mirror
# type = config
# includes = *.sh *.desktop systeminfo.txt
# excludes = .stfolder .stversions

# Example: Add more save sources if emulators save elsewhere
# [saves-dolphin]
# path = ~/.local/share/dolphin-emu/GC
# mode = mirror
# type = save
# excludes =
